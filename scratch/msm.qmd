---
title: "Untitled"
format: html
---

```{r}
#options(repos = c(CRAN = "http://cran.rstudio.com"))
library(msm)
library(tidyverse)

set.seed(0)
cav <- cav %>% mutate(obstype = sample(c(1,2), nrow(.), replace = TRUE)) # mix of panel and exactly observed data
readr::write_csv(cav, "scratch/cav.csv")

Q_ind <- matrix(# need connections between states 1 and 3.
    c(0,1,1,1,
      1,0,1,1,
      1,1,0,1,
      0,0,0,0),
    nrow = 4, byrow = TRUE)
Q0 <- crudeinits.msm(state ~ years, PTNUM, data = cav, qmatrix = Q_ind)
m_mixed_12 <- msm(state ~ years, PTNUM, data = cav, qmatrix = Q0, obstype = obstype)
print(m_mixed_12)
```